<dom-module id="tm-html-preview">
  <template>
    <style>
      :host {
        display: inline-block;
        border:solid green 1px;
        box-sizing: border-box;
      }
      iframe {
        display:inline-block;
        width: 100%;
        height: 100%;

      }
      div {
        display:inline-block;
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        border:solid red 2px;
      }
    </style>
    <div>
      <iframe id="iframe" frameborder="0"></iframe>
    </div>
  </template>

  <script>
    Polymer({

      is: 'tm-html-preview',

      properties: {
        prop1: {
          type: String,
          value: 'tm-html-preview',
        },
      },

      ready: function() {
        this.setCode('<html><head><style>h2 {color:red;text-align:center;}</style></head><body><h2>This heading should be red and centered</h2></body></html>');
      },

      setCode: function(code) {
        const iframe = this.$.iframe;
        const iframeDoc = iframe.contentWindow ?
                          iframe.contentWindow :
                          iframe.contentDocument.document ?
                            iframe.contentDocument.document :
                            iframe.contentDocument;

        iframeDoc.document.open();
        iframeDoc.document.write(code);
        iframeDoc.document.close();
      }

    });
  </script>
</dom-module>
